<div class="space-y-8">
  
  <div class="flex justify-between items-center">
    <div>
      <h1 class="text-3xl font-bold text-dark-grey">Kontrolna Tabla</h1>
      <p class="text-gray-500">Pregled aktivnosti na ulazu u ko≈°nicu</p>
    </div>
    <button (click)="loadResults()" class="p-2 text-gray-400 hover:text-honey transition">
      <i class="fa-solid fa-rotate"></i> Osvje≈æi
    </button>
  </div>

  <div 
    class="border-4 border-dashed rounded-2xl p-12 text-center transition-all duration-300 cursor-pointer group relative overflow-hidden"
    [class.border-honey]="isDragging"
    [class.bg-yellow-50]="isDragging"
    [class.border-gray-300]="!isDragging"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    (click)="fileInput.click()">

    <input #fileInput type="file" multiple class="hidden" (change)="onFileSelected($event)" accept="image/*">

    <div *ngIf="uploading" class="absolute inset-0 bg-white/80 flex flex-col items-center justify-center z-10">
      <i class="fa-solid fa-spinner fa-spin fa-3x text-honey mb-4"></i>
      <p class="font-bold text-dark-grey">≈†aljem slike Polenko Agentu...</p>
    </div>

    <div class="pointer-events-none">
      <div class="bg-gray-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-honey group-hover:text-white transition-colors">
        <i class="fa-solid fa-cloud-arrow-up fa-2x text-gray-400 group-hover:text-white"></i>
      </div>
      <h3 class="text-xl font-bold text-dark-grey mb-2">Prevuci slike pƒçela ovdje</h3>
      <p class="text-gray-500">ili klikni da otvori≈° pretra≈æivaƒç fajlova</p>
      <div class="mt-4 inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">
        Mode: üïµÔ∏è‚Äç‚ôÇÔ∏è Scoring (Analiza)
      </div>
    </div>
  </div>

  <div>
    <h2 class="text-xl font-bold text-dark-grey mb-4 border-l-4 border-honey pl-3">
      Zadnje Analize
    </h2>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
      
      <div *ngFor="let sample of recentSamples" 
           class="bg-white rounded-xl shadow-sm hover:shadow-md transition overflow-hidden border-2"
           [ngClass]="sample.predictions?.[0] ? getBorderColor(sample.predictions![0]) : 'border-gray-200'">
        
        <div class="h-48 overflow-hidden bg-gray-100 relative group">
           <img [src]="getImageUrl(sample.imagePath)" 
     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
           
           <div class="absolute top-2 right-2">
             <span *ngIf="sample.predictions?.[0]?.predictedLabel === 'Pollen'" 
                   class="bg-honey text-white text-xs font-bold px-2 py-1 rounded shadow">
               POLLEN
             </span>
             <span *ngIf="sample.predictions?.[0]?.predictedLabel === 'NoPollen'" 
                   class="bg-gray-600 text-white text-xs font-bold px-2 py-1 rounded shadow">
               NO POLLEN
             </span>
           </div>
        </div>

        <div class="p-4">
          <div class="flex justify-between items-end">
            <div>
              <p class="text-xs text-gray-500 uppercase tracking-wider">Score</p>
              <p class="text-2xl font-bold text-dark-grey">
                {{ (sample.predictions?.[0]?.score || 0) * 100 | number:'1.0-0' }}%
              </p>
            </div>
            <div *ngIf="sample.predictions?.[0]?.decision === 'Confident'" class="text-green-500" title="Siguran">
              <i class="fa-solid fa-check-circle fa-lg"></i>
            </div>
            <div *ngIf="sample.predictions?.[0]?.decision === 'Uncertain'" class="text-yellow-500" title="Nesiguran">
              <i class="fa-solid fa-circle-question fa-lg"></i>
            </div>
          </div>
          <p class="text-xs text-gray-400 mt-2 truncate">{{ sample.id }}</p>
        </div>

      </div>
      
    </div>
    
    <div *ngIf="recentSamples.length === 0" class="text-center py-12 text-gray-400">
      <i class="fa-solid fa-box-open fa-3x mb-4"></i>
      <p>Nema nedavnih analiza. Uploaduj neku sliku!</p>
    </div>

  </div>

</div>